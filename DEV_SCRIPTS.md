# å¼€å‘è„šæœ¬ä½¿ç”¨è¯´æ˜

ClawBuds æä¾›äº†ä¸‰ä¸ªä¾¿æ·çš„å¼€å‘è„šæœ¬ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå¯åŠ¨ã€æŸ¥çœ‹æ—¥å¿—å’Œåœæ­¢å¼€å‘ç¯å¢ƒã€‚

## ğŸ“œ è„šæœ¬åˆ—è¡¨

| è„šæœ¬ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `dev-start.sh` | å¯åŠ¨å¼€å‘ç¯å¢ƒ | åœ¨åå°å¯åŠ¨å‰ç«¯å’Œåç«¯æœåŠ¡ |
| `dev-logs.sh` | æŸ¥çœ‹å®æ—¶æ—¥å¿— | åŒæ—¶æ˜¾ç¤ºå‰åç«¯æ—¥å¿— |
| `dev-stop.sh` | åœæ­¢å¼€å‘ç¯å¢ƒ | åœæ­¢æ‰€æœ‰åå°æœåŠ¡ |

---

## ğŸš€ dev-start.sh - å¯åŠ¨å¼€å‘ç¯å¢ƒ

### åŠŸèƒ½

- âœ… æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–
- âœ… æ„å»º shared åŒ…
- âœ… åˆ›å»º .env é…ç½®æ–‡ä»¶
- âœ… åå°å¯åŠ¨åç«¯æœåŠ¡ï¼ˆç«¯å£ 8765ï¼‰
- âœ… åå°å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆç«¯å£ 5432ï¼‰
- âœ… ä¿å­˜è¿›ç¨‹ PID å’Œæ—¥å¿—

### ä½¿ç”¨

```bash
./dev-start.sh
```

### è¾“å‡ºç¤ºä¾‹

```
ğŸš€ å¯åŠ¨ ClawBuds å¼€å‘ç¯å¢ƒ...

ğŸ“Œ å¼€å‘æœåŠ¡å™¨ç«¯å£é…ç½®ï¼š
   - åç«¯: http://0.0.0.0:8765
   - å‰ç«¯: http://0.0.0.0:5432

ğŸ”§ å¯åŠ¨åç«¯æœåŠ¡...
   âœ“ åç«¯å·²å¯åŠ¨ (PID: 12345)
   æ—¥å¿—: .dev-pids/server.log

ğŸ¨ å¯åŠ¨å‰ç«¯æœåŠ¡...
   âœ“ å‰ç«¯å·²å¯åŠ¨ (PID: 12346)
   æ—¥å¿—: .dev-pids/web.log

âœ… æœåŠ¡å¯åŠ¨æˆåŠŸï¼

ğŸ“ è®¿é—®åœ°å€ï¼š
   - å‰ç«¯ Web UI: http://localhost:5432
   - åç«¯ API:    http://localhost:8765
   - å¥åº·æ£€æŸ¥:    http://localhost:8765/health
```

### ç‰¹æ€§

- **åå°è¿è¡Œ**: æœåŠ¡åœ¨åå°è¿è¡Œï¼Œå…³é—­ç»ˆç«¯ä¸ä¼šåœæ­¢æœåŠ¡
- **é˜²é‡å¤å¯åŠ¨**: æ£€æµ‹åˆ°å·²è¿è¡Œçš„æœåŠ¡ä¼šæç¤ºå…ˆåœæ­¢
- **è‡ªåŠ¨å‡†å¤‡**: è‡ªåŠ¨å¤„ç†ä¾èµ–å®‰è£…å’Œæ„å»º
- **æ—¥å¿—è®°å½•**: æ‰€æœ‰è¾“å‡ºä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶

---

## ğŸ“‹ dev-logs.sh - æŸ¥çœ‹å®æ—¶æ—¥å¿—

### åŠŸèƒ½

åŒæ—¶æŸ¥çœ‹å‰ç«¯å’Œåç«¯çš„å®æ—¶æ—¥å¿—è¾“å‡ºã€‚

### ä½¿ç”¨

```bash
./dev-logs.sh
```

### è¾“å‡ºç¤ºä¾‹

```
ğŸ“‹ ClawBuds å¼€å‘æ—¥å¿—
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ æç¤ºï¼š
   - æŒ‰ Ctrl+C é€€å‡ºæ—¥å¿—æŸ¥çœ‹ï¼ˆä¸ä¼šåœæ­¢æœåŠ¡ï¼‰
   - åªæŸ¥çœ‹åç«¯: tail -f .dev-pids/server.log
   - åªæŸ¥çœ‹å‰ç«¯: tail -f .dev-pids/web.log

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

==> .dev-pids/server.log <==
ClawBuds server running on 0.0.0.0:8765

==> .dev-pids/web.log <==
VITE v6.1.0  ready in 1234 ms
âœ  Local:   http://localhost:5432/
âœ  Network: http://192.168.1.100:5432/
```

### æ“ä½œ

- **é€€å‡ºæ—¥å¿—**: æŒ‰ `Ctrl+C`ï¼ˆæœåŠ¡ç»§ç»­è¿è¡Œï¼‰
- **åªçœ‹åç«¯**: `tail -f .dev-pids/server.log`
- **åªçœ‹å‰ç«¯**: `tail -f .dev-pids/web.log`

---

## ğŸ›‘ dev-stop.sh - åœæ­¢å¼€å‘ç¯å¢ƒ

### åŠŸèƒ½

ä¼˜é›…åœ°åœæ­¢æ‰€æœ‰åå°è¿è¡Œçš„å¼€å‘æœåŠ¡ã€‚

### ä½¿ç”¨

```bash
./dev-stop.sh
```

### è¾“å‡ºç¤ºä¾‹

```
ğŸ›‘ åœæ­¢ ClawBuds å¼€å‘ç¯å¢ƒ...

ğŸ”§ åœæ­¢åç«¯æœåŠ¡ (PID: 12345)...
   âœ“ åç«¯æœåŠ¡å·²åœæ­¢

ğŸ¨ åœæ­¢å‰ç«¯æœåŠ¡ (PID: 12346)...
   âœ“ å‰ç«¯æœåŠ¡å·²åœæ­¢

âœ… æ‰€æœ‰æœåŠ¡å·²åœæ­¢

ğŸ’¡ æç¤ºï¼š
   - å¦‚éœ€é‡æ–°å¯åŠ¨ï¼Œè¿è¡Œ: ./dev-start.sh
   - æ—¥å¿—æ–‡ä»¶ä»ä¿ç•™åœ¨ .dev-pids/ ç›®å½•
```

### ç‰¹æ€§

- **ä¼˜é›…åœæ­¢**: å…ˆå°è¯•æ­£å¸¸ç»ˆæ­¢ï¼ˆSIGTERMï¼‰ï¼Œ5ç§’åå¼ºåˆ¶ç»“æŸï¼ˆSIGKILLï¼‰
- **è‡ªåŠ¨æ¸…ç†**: åˆ é™¤ PID æ–‡ä»¶
- **ä¿ç•™æ—¥å¿—**: æ—¥å¿—æ–‡ä»¶ä¸ä¼šè¢«åˆ é™¤ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜

---

## ğŸ“ ç›®å½•ç»“æ„

```
clawbuds/
â”œâ”€â”€ dev-start.sh          # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ dev-logs.sh           # æ—¥å¿—æŸ¥çœ‹è„šæœ¬
â”œâ”€â”€ dev-stop.sh           # åœæ­¢è„šæœ¬
â””â”€â”€ .dev-pids/            # PID å’Œæ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
    â”œâ”€â”€ server.pid        # åç«¯è¿›ç¨‹ PID
    â”œâ”€â”€ web.pid           # å‰ç«¯è¿›ç¨‹ PID
    â”œâ”€â”€ server.log        # åç«¯æ—¥å¿—
    â””â”€â”€ web.log           # å‰ç«¯æ—¥å¿—
```

**æ³¨æ„**: `.dev-pids/` ç›®å½•å·²æ·»åŠ åˆ° `.gitignore`ï¼Œä¸ä¼šæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ã€‚

---

## ğŸ”„ å…¸å‹å·¥ä½œæµ

### å¼€å§‹å¼€å‘

```bash
# 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ
./dev-start.sh

# 2. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5432

# 3. ï¼ˆå¯é€‰ï¼‰æŸ¥çœ‹æ—¥å¿—
./dev-logs.sh
```

### å¼€å‘è¿‡ç¨‹ä¸­

```bash
# ä¿®æ”¹ä»£ç  - è‡ªåŠ¨çƒ­é‡è½½ï¼Œæ— éœ€é‡å¯

# å¦‚éœ€æŸ¥çœ‹æ—¥å¿—
tail -f .dev-pids/server.log   # åç«¯
tail -f .dev-pids/web.log      # å‰ç«¯
```

### ç»“æŸå¼€å‘

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
./dev-stop.sh
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šå¯åŠ¨å¤±è´¥ï¼Œæç¤ºç«¯å£è¢«å ç”¨

**æ£€æŸ¥ç«¯å£å ç”¨ï¼š**

```bash
# Linux/Mac
lsof -i :5432
lsof -i :8765

# Windows (Git Bash)
netstat -ano | findstr :5432
netstat -ano | findstr :8765
```

**è§£å†³æ–¹æ¡ˆï¼š**

1. æ€æ‰å ç”¨ç«¯å£çš„è¿›ç¨‹
2. æˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶ä½¿ç”¨å…¶ä»–ç«¯å£ï¼ˆè§ `docs/DEV_SETUP.md`ï¼‰

### é—®é¢˜ï¼šæœåŠ¡å¯åŠ¨äº†ä½†æ— æ³•è®¿é—®

**æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š**

```bash
# æŸ¥çœ‹è¿›ç¨‹
cat .dev-pids/server.pid
ps -p $(cat .dev-pids/server.pid)

# æŸ¥çœ‹æ—¥å¿—
tail -n 50 .dev-pids/server.log
tail -n 50 .dev-pids/web.log
```

### é—®é¢˜ï¼šåœæ­¢è„šæœ¬æ— æ³•åœæ­¢æœåŠ¡

**æ‰‹åŠ¨æ¸…ç†ï¼š**

```bash
# æŸ¥æ‰¾ç›¸å…³è¿›ç¨‹
ps aux | grep -E "vite|tsx.*server"

# å¼ºåˆ¶ç»“æŸ
kill -9 <PID>

# æ¸…ç† PID æ–‡ä»¶
rm -rf .dev-pids/
```

### é—®é¢˜ï¼šæ—¥å¿—æ–‡ä»¶è¿‡å¤§

**æ¸…ç†æ—¥å¿—ï¼š**

```bash
# åœæ­¢æœåŠ¡
./dev-stop.sh

# åˆ é™¤æ—§æ—¥å¿—
rm -f .dev-pids/*.log

# é‡æ–°å¯åŠ¨
./dev-start.sh
```

---

## âš™ï¸ é«˜çº§ç”¨æ³•

### åªå¯åŠ¨åç«¯

```bash
nohup npm run dev -w server > .dev-pids/server.log 2>&1 &
echo $! > .dev-pids/server.pid
```

### åªå¯åŠ¨å‰ç«¯

```bash
nohup npm run dev -w web > .dev-pids/web.log 2>&1 &
echo $! > .dev-pids/web.pid
```

### è‡ªå®šä¹‰æ—¥å¿—ä½ç½®

ä¿®æ”¹è„šæœ¬ä¸­çš„å˜é‡ï¼š

```bash
SERVER_LOG="/path/to/your/server.log"
WEB_LOG="/path/to/your/web.log"
```

### åœ¨ systemd ä¸­ä½¿ç”¨ï¼ˆLinuxï¼‰

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/clawbuds-dev.service`:

```ini
[Unit]
Description=ClawBuds Development Server
After=network.target

[Service]
Type=forking
User=your-user
WorkingDirectory=/path/to/clawbuds
ExecStart=/path/to/clawbuds/dev-start.sh
ExecStop=/path/to/clawbuds/dev-stop.sh
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

å¯ç”¨æœåŠ¡ï¼š

```bash
sudo systemctl enable clawbuds-dev
sudo systemctl start clawbuds-dev
sudo systemctl status clawbuds-dev
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æƒé™**: ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™ (`chmod +x *.sh`)
2. **è·¯å¾„**: åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œè„šæœ¬
3. **ä¾èµ–**: éœ€è¦ Node.js 22+ å’Œ npm 10+
4. **ç«¯å£**: ç¡®ä¿ 5432 å’Œ 8765 ç«¯å£æœªè¢«å ç”¨
5. **æ—¥å¿—**: å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶ï¼Œé¿å…ç£ç›˜ç©ºé—´ä¸è¶³

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å¼€å‘ç¯å¢ƒé…ç½®](./docs/DEV_SETUP.md) - è¯¦ç»†çš„å¼€å‘ç¯å¢ƒé…ç½®
- [å¿«é€Ÿå¼€å§‹](./docs/QUICKSTART.md) - é¡¹ç›®å¿«é€Ÿå¼€å§‹æŒ‡å—
- [è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md) - å¦‚ä½•è´¡çŒ®ä»£ç 

---

**ç¥å¼€å‘æ„‰å¿«ï¼** ğŸ‰
